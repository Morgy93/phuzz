<?php
/***
*
*Found actions: 106
*Found functions:85
*Extracted functions:79
*Total parameter names extracted: 13
*Overview: {'get_module_addons': {'forminator_addon_get_module_addons'}, 'load_google_fonts': {'forminator_load_google_fonts'}, 'load_privacy_settings': {'forminator_load_privacy_settings_popup'}, 'multiple_file_upload': {'forminator_multiple_file_upload', 'nopriv_forminator_multiple_file_upload'}, 'search_emails': {'forminator_builder_search_emails'}, 'save_uninstall_form': {'forminator_save_uninstall_settings_popup'}, 'create_appearance_preset': {'forminator_create_appearance_preset'}, 'dismiss_admin_notice': {'forminator_dismiss_notice'}, 'delete_unconfirmed_user': {'forminator_delete_unconfirmed_user_popup'}, 'save_currency': {'forminator_save_currency_popup'}, 'save_pagination_entries': {'forminator_save_pagination_entries_popup'}, 'stripe_disconnect': {'forminator_disconnect_stripe'}, 'load_import_form_gravity': {'forminator_load_import_form_gravity_popup'}, 'ajax_group_interests': {'forminator_mailchimp_get_group_interests'}, 'save_quiz': {'forminator_save_quiz_knowledge', 'forminator_save_quiz_nowrong'}, 'load_email_form': {'forminator_load_email_settings_popup'}, 'apply_appearance_preset': {'forminator_apply_appearance_preset'}, 'hubspot_support_request': {'forminator_hubspot_support_request'}, 'save_poll_form': {'forminator_save_poll'}, 'save_import_form_gravity': {'forminator_save_import_form_gravity_popup'}, 'save_privacy_settings': {'forminator_save_privacy_settings_popup'}, 'get_nonce': {'nopriv_forminator_get_nonce', 'forminator_get_nonce'}, 'load_captcha': {'forminator_load_captcha_popup'}, 'save_import': {'forminator_save_import_poll_popup', 'forminator_save_import_quiz_popup', 'forminator_save_import_form_popup'}, 'save_captcha': {'forminator_save_captcha_popup'}, 'dismiss_notice': {'forminator_dismiss_notification'}, 'load_import_form_cf7': {'forminator_load_import_form_cf7_popup'}, 'load_uninstall_form': {'forminator_load_uninstall_settings_popup'}, 'approve_user': {'forminator_approve_user_popup'}, 'load_exports': {'forminator_load_exports_popup'}, 'save_report': {'forminator_save_report'}, 'paypal_update_page': {'forminator_paypal_update_page'}, 'fallback_email': {'forminator_2fa_fallback_email', 'nopriv_forminator_2fa_fallback_email'}, 'load_hcaptcha_preview': {'forminator_load_hcaptcha_preview'}, 'module_settings': {'forminator_addon_module_settings'}, 'addons_page_actions': {'$action'}, 'stripe_update_page': {'forminator_stripe_update_page'}, 'Forminator_Poll_Front': {'forminator_load_poll', 'nopriv_forminator_load_poll'}, 'settings': {'forminator_addon_settings'}, 'delete_poll_submissions': {'forminator_delete_poll_submissions'}, 'update_payment_amount': {'forminator_update_payment_amount', 'nopriv_forminator_update_payment_amount'}, 'paypal_disconnect': {'forminator_disconnect_paypal'}, 'load_pagination_listings': {'forminator_load_pagination_listings_popup'}, 'save_pagination_listings': {'forminator_save_pagination_listings_popup'}, 'save_appearance_preset': {'forminator_save_appearance_preset'}, 'paypal_settings_modal': {'forminator_paypal_settings_modal'}, 'dismiss_welcome': {'nopriv_forminator_dismiss_welcome', 'forminator_dismiss_welcome'}, 'Forminator_CForm_Front': {'forminator_load_form', 'nopriv_forminator_load_form'}, 'load_currency': {'forminator_load_currency_popup'}, 'deactivate_for_module': {'forminator_addon_deactivate_for_module'}, 'create_paypal_order': {'forminator_pp_create_order', 'nopriv_forminator_pp_create_order'}, 'load_recaptcha_preview': {'forminator_load_recaptcha_preview'}, 'refresh_email_lists': {'forminator_refresh_email_lists'}, 'deactivate': {'forminator_addon_deactivate'}, 'preview_module': {'forminator_load_preview_cforms_popup', 'forminator_load_preview_quizzes_popup', 'forminator_load_preview_polls_popup'}, 'get_avatar': {'forminator_get_avatar'}, 'load_pagination_entries': {'forminator_load_pagination_entries_popup'}, 'stripe_settings_modal': {'forminator_stripe_settings_modal'}, 'delete_appearance_preset': {'forminator_delete_appearance_preset'}, 'save_accessibility_settings': {'forminator_save_accessibility_settings_popup'}, 'reset_tracking_data': {'forminator_reset_tracking_data'}, 'later_notice': {'forminator_later_notification'}, 'load_import_form_ninja': {'forminator_load_import_form_ninja_popup'}, 'fetch_report': {'forminator_fetch_report'}, 'load_export': {'forminator_load_export_poll_popup', 'forminator_load_export_form_popup', 'forminator_load_export_quiz_popup'}, 'Forminator_QForm_Front': {'nopriv_forminator_reload_quiz', 'nopriv_forminator_load_quiz', 'forminator_load_quiz', 'forminator_reload_quiz'}, 'save_payments': {'forminator_save_payments_settings_popup'}, 'get_addons': {'forminator_addon_get_addons'}, 'module_search': {'forminator_module_search'}, 'process_action': {'wpmudev_notices_action'}, 'save_builder': {'forminator_save_builder'}, 'save_login': {'forminator_save_login'}, 'load_import': {'forminator_load_import_quiz_popup', 'forminator_load_import_form_popup', 'forminator_load_import_poll_popup'}, 'resend_activation_link': {'forminator_resend_activation_link'}, 'filter_report_data': {'forminator_filter_report_data'}, 'submit_email_draft_link': {'nopriv_forminator_email_draft_link', 'forminator_email_draft_link'}, 'search_users': {'forminator_search_users'}, 'save_register': {'forminator_save_register'}, 'promote_remind_later': {'forminator_promote_remind_later'}, 'clear_exports': {'forminator_clear_exports_popup'}, 'save_dashboard_settings': {'forminator_save_dashboard_settings_popup'}, 'update_report_status': {'forminator_report_update_status'}, 'save_import_form_ninja': {'forminator_save_import_form_ninja_popup'}, 'resend_notification_email': {'forminator_resend_notification_email'}, 'save_import_form_cf7': {'forminator_save_import_form_cf7_popup'}}
*
***/

/** Function get_module_addons() called by wp_ajax hooks: {'forminator_addon_get_module_addons'} **/
/** No params detected :-/ **/


/** Function load_google_fonts() called by wp_ajax hooks: {'forminator_load_google_fonts'} **/
/** Parameters found in function load_google_fonts(): {"post": ["data"]} **/
function load_google_fonts() {
		forminator_validate_ajax( 'forminator_load_google_fonts' );

		$is_object = isset( $_POST['data']['isObject'] ) ? sanitize_text_field( $_POST['data']['isObject'] ) : false;

		$fonts = forminator_get_font_families( $is_object );
		wp_send_json_success( $fonts );
	}


/** Function load_privacy_settings() called by wp_ajax hooks: {'forminator_load_privacy_settings_popup'} **/
/** No params detected :-/ **/


/** Function multiple_file_upload() called by wp_ajax hooks: {'forminator_multiple_file_upload', 'nopriv_forminator_multiple_file_upload'} **/
/** No params detected :-/ **/


/** Function search_emails() called by wp_ajax hooks: {'forminator_builder_search_emails'} **/
/** No params detected :-/ **/


/** Function save_uninstall_form() called by wp_ajax hooks: {'forminator_save_uninstall_settings_popup'} **/
/** No params detected :-/ **/


/** Function create_appearance_preset() called by wp_ajax hooks: {'forminator_create_appearance_preset'} **/
/** No params detected :-/ **/


/** Function dismiss_admin_notice() called by wp_ajax hooks: {'forminator_dismiss_notice'} **/
/** No params detected :-/ **/


/** Function delete_unconfirmed_user() called by wp_ajax hooks: {'forminator_delete_unconfirmed_user_popup'} **/
/** No params detected :-/ **/


/** Function save_currency() called by wp_ajax hooks: {'forminator_save_currency_popup'} **/
/** No params detected :-/ **/


/** Function save_pagination_entries() called by wp_ajax hooks: {'forminator_save_pagination_entries_popup'} **/
/** No function found :-/ **/


/** Function stripe_disconnect() called by wp_ajax hooks: {'forminator_disconnect_stripe'} **/
/** No params detected :-/ **/


/** Function load_import_form_gravity() called by wp_ajax hooks: {'forminator_load_import_form_gravity_popup'} **/
/** No params detected :-/ **/


/** Function ajax_group_interests() called by wp_ajax hooks: {'forminator_mailchimp_get_group_interests'} **/
/** Parameters found in function ajax_group_interests(): {"post": ["data"]} **/
function ajax_group_interests() {
		forminator_validate_ajax( 'forminator_mailchimp_interests' );
		$html      = '';
		$post_data = isset( $_POST['data'] ) ? Forminator_Core::sanitize_array( $_POST['data'], 'data' ) : array();
		$data      = array();
		wp_parse_str( $post_data, $data );
		$module_id = isset( $data['module_id'] ) ? $data['module_id'] : '';
		$module_type = isset( $data['module_type'] ) ? $data['module_type'] : '';
		if ( $module_id ) {
			$module_settings_instance = $this->get_addon_settings( $module_id, $module_type );
			$html                   = $module_settings_instance->get_group_interests( $data );
		}

		wp_send_json_success( $html );
	}


/** Function save_quiz() called by wp_ajax hooks: {'forminator_save_quiz_knowledge', 'forminator_save_quiz_nowrong'} **/
/** Parameters found in function save_quiz(): {"post": ["data"]} **/
function save_quiz() {
		if ( ! forminator_is_user_allowed() ) {
			wp_send_json_error( __( 'Invalid request, you are not allowed to do that action.', 'forminator' ) );
		}

		forminator_validate_ajax( 'forminator_save_quiz' );

		$submitted_data = $this->get_post_data();

		$quiz_data = array();
		if ( ! empty( $_POST['data'] ) ) {
			$quiz_data = Forminator_Core::sanitize_array( json_decode( wp_unslash( $_POST['data'] ), true ) );
		}

		$id       = isset( $submitted_data['form_id'] ) ? intval( $submitted_data['form_id'] ) : 0;
		$settings = isset( $quiz_data['settings'] ) ? $quiz_data['settings'] : array();
		$title    = isset( $submitted_data['quiz_title'] ) ? $submitted_data['quiz_title'] : $submitted_data['formName'];
		$status   = isset( $submitted_data['status'] ) ? $submitted_data['status'] : '';
		$version  = isset( $submitted_data['version'] ) ? $submitted_data['version'] : '1.0';
		$template = new stdClass();

		$template->type = isset( $submitted_data['action'] ) ? $submitted_data['action'] : '';
		// Check if results exist
		if ( isset( $quiz_data['results'] ) && is_array( $quiz_data['results'] ) ) {
			$template->results = $quiz_data['results'];
		}

		// Check if answers exist
		if ( isset( $quiz_data['questions'] ) ) {
			$template->questions = $quiz_data['questions'];
		}

		if ( isset( $quiz_data['settings'] ) ) {
			$settings = $quiz_data['settings'];
		}
		$settings['version'] = $version;
		$template->settings  = $settings;

		if ( isset( $quiz_data['notifications'] ) ) {
			$template->notifications = $quiz_data['notifications'];
		}

		$id = Forminator_Quiz_Admin::update( $id, $title, $status, $template );
		if ( is_wp_error( $id ) ) {
			wp_send_json_error( $id->get_error_message() );
		} else {
			wp_send_json_success( $id );
		}
	}


/** Function load_email_form() called by wp_ajax hooks: {'forminator_load_email_settings_popup'} **/
/** No params detected :-/ **/


/** Function apply_appearance_preset() called by wp_ajax hooks: {'forminator_apply_appearance_preset'} **/
/** Parameters found in function apply_appearance_preset(): {"post": ["settings"]} **/
function apply_appearance_preset() {
		forminator_validate_ajax( 'forminator_apply_preset' );

		$preset_id = Forminator_Core::sanitize_text_field( 'preset_id' );
		$ids       = filter_input( INPUT_POST, 'ids', FILTER_VALIDATE_INT, FILTER_REQUIRE_ARRAY );
		$edit_form = filter_input( INPUT_POST, 'edit_form', FILTER_VALIDATE_BOOLEAN );
		$count     = 0;

		$new_settings = Forminator_Settings_Page::get_preset( $preset_id );
		if ( $ids ) {
			foreach ( $ids as $form_id ) {
				$form_model = Forminator_Base_Form_Model::get_model( $form_id );
				if ( ! $form_model ) {
					continue;
				}

				$form_model->settings = self::merge_appearance_settings( $form_model->settings, $new_settings );

				if ( $edit_form ) {
					$settings     = isset( $_POST['settings'] ) ? Forminator_Core::sanitize_array( $_POST['settings'] ) : array();
					$old_settings = json_decode( wp_unslash( $settings ), true );
					if ( $old_settings ) {
						$form_model->settings = self::merge_appearance_settings( $old_settings, $new_settings );
					}
					wp_send_json_success( $form_model->settings );
				}

				// Save data.
				$form_model->save();

				// Regenerare module css file.
				Forminator_Render_Form::regenerate_css_file( $form_id );

				$count ++;
			}
		}

		if ( $edit_form ) {
			wp_send_json_error( __( 'Something went wrong.', 'forminator' ) );
		}

		$success = sprintf( __( 'Preset successfully applied to %d form(s).', 'forminator' ), $count );
		wp_send_json_success( $success );
	}


/** Function hubspot_support_request() called by wp_ajax hooks: {'forminator_hubspot_support_request'} **/
/** No params detected :-/ **/


/** Function save_poll_form() called by wp_ajax hooks: {'forminator_save_poll'} **/
/** Parameters found in function save_poll_form(): {"post": ["data"]} **/
function save_poll_form() {
		if ( ! forminator_is_user_allowed() ) {
			wp_send_json_error( __( 'Invalid request, you are not allowed to do that action.', 'forminator' ) );
		}

		forminator_validate_ajax( 'forminator_save_poll' );

		$submitted_data = $this->get_post_data();
		$poll_data      = array();
		if ( ! empty( $_POST['data'] ) ) {
			$poll_data = Forminator_Core::sanitize_array( json_decode( wp_unslash( $_POST['data'] ), true ) );
		}

		$settings = isset( $poll_data['settings'] ) ? $poll_data['settings'] : array();
		$id       = isset( $submitted_data['form_id'] ) ? intval( $submitted_data['form_id'] ) : 0;
		$title    = $submitted_data['formName'];
		$status   = isset( $submitted_data['status'] ) ? $submitted_data['status'] : '';
		$version  = isset( $submitted_data['version'] ) ? $submitted_data['version'] : '1.0';
		$template = new stdClass();

		if ( isset( $poll_data['answers'] ) ) {
			$template->answers = $poll_data['answers'];
		}

		$settings['version'] = $version;
		$template->settings  = $settings;

		$id = Forminator_Poll_Admin::update( $id, $title, $status, $template );
		if ( is_wp_error( $id ) ) {
			wp_send_json_error( $id->get_error_message() );
		} else {
			wp_send_json_success( $id );
		}
	}


/** Function save_import_form_gravity() called by wp_ajax hooks: {'forminator_save_import_form_gravity_popup'} **/
/** No params detected :-/ **/


/** Function save_privacy_settings() called by wp_ajax hooks: {'forminator_save_privacy_settings_popup'} **/
/** No params detected :-/ **/


/** Function get_nonce() called by wp_ajax hooks: {'nopriv_forminator_get_nonce', 'forminator_get_nonce'} **/
/** No params detected :-/ **/


/** Function load_captcha() called by wp_ajax hooks: {'forminator_load_captcha_popup'} **/
/** No params detected :-/ **/


/** Function save_import() called by wp_ajax hooks: {'forminator_save_import_poll_popup', 'forminator_save_import_quiz_popup', 'forminator_save_import_form_popup'} **/
/** Parameters found in function save_import(): {"post": ["importable"]} **/
function save_import() {
		if ( ! Forminator::is_import_export_feature_enabled() ) {
			wp_send_json_error( __( 'Import Export Feature disabled.', 'forminator' ) );
		}
		$current_action = current_action();
		$slug           = str_replace( array( 'wp_ajax_forminator_save_import_', '_popup' ), '', $current_action );
		// Validate nonce
		forminator_validate_ajax( 'forminator_save_import_' . $slug );

		$importable = json_decode( html_entity_decode( wp_unslash( $_POST['importable'] ) ), true );

		$import_data = Forminator_Core::sanitize_array( $importable );

		// Modify recipients if replace all recipients checkbox has been checked.
		$change_recipients = Forminator_Core::sanitize_text_field( 'change_recipients' );
		if ( 'checked' === $change_recipients ) {
			$import_data = $this->change_recipients( $import_data );
		}

		// hook custom data here.
		$import_data = apply_filters( 'forminator_' . $slug . '_import_data', $import_data );

		try {
			if ( empty( $_POST['importable'] ) ) {
				throw new Exception( __( 'Import text can not be empty.', 'forminator' ) );
			}

			if ( empty( $import_data ) || ! is_array( $import_data ) ) {
				throw new Exception( __( 'Oops, looks like we found an issue. Import text can not include whitespace or special characters.', 'forminator' ) );
			}

			if ( ! isset( $import_data['type'] ) || $slug !== $import_data['type'] ) {
				throw new Exception( __( 'Oops, wrong module type. You can only import a module of the same type that you\'re currently viewing.', 'forminator' ) );
			}

			$class = 'Forminator_' . forminator_get_prefix( $slug, '', true ) . '_Model';
			$model = $class::create_from_import_data( $import_data );

			if ( is_wp_error( $model ) ) {
				throw new Exception( $model->get_error_message() );
			}

			if ( ! $model instanceof Forminator_Base_Form_Model ) {
				throw new Exception( __( 'Failed to import module, please make sure import text is valid, and try again.', 'forminator' ) );
			}

			$return_url = admin_url( 'admin.php?page=forminator-' . forminator_get_prefix( $slug, 'c' ) );

			wp_send_json_success(
				array(
					'id'  => $model->id,
					'url' => $return_url,
				)
			);

		} catch ( Exception $e ) {
			wp_send_json_error( $e->getMessage() );
		}
	}


/** Function save_captcha() called by wp_ajax hooks: {'forminator_save_captcha_popup'} **/
/** Parameters found in function save_captcha(): {"post": ["hcaptcha_key", "hcaptcha_secret", "captcha_tab_saved", "hcaptcha_noconflict"]} **/
function save_captcha() {
		// Validate nonce
		forminator_validate_ajax( 'forminator_save_popup_captcha' );

		update_option( 'forminator_captcha_key', Forminator_Core::sanitize_text_field( 'v2_captcha_key' ) );
		update_option( 'forminator_captcha_secret', Forminator_Core::sanitize_text_field( 'v2_captcha_secret' ) );

		update_option( 'forminator_v2_invisible_captcha_key', Forminator_Core::sanitize_text_field( 'v2_invisible_captcha_key' ) );
		update_option( 'forminator_v2_invisible_captcha_secret', Forminator_Core::sanitize_text_field( 'v2_invisible_captcha_secret' ) );

		update_option( 'forminator_v3_captcha_key', Forminator_Core::sanitize_text_field( 'v3_captcha_key' ) );
		update_option( 'forminator_v3_captcha_secret', Forminator_Core::sanitize_text_field( 'v3_captcha_secret' ) );

		update_option( 'forminator_hcaptcha_key', sanitize_text_field( $_POST['hcaptcha_key'] ) );
		update_option( 'forminator_hcaptcha_secret', sanitize_text_field( $_POST['hcaptcha_secret'] ) );
		update_option( 'forminator_captcha_tab_saved', sanitize_text_field( $_POST['captcha_tab_saved'] ) );
		// update_option( "forminator_hcaptcha_noconflict", sanitize_text_field( $_POST['hcaptcha_noconflict'] ) );

		update_option( 'forminator_captcha_language', Forminator_Core::sanitize_text_field( 'captcha_language' ) );

		wp_send_json_success();
	}


/** Function dismiss_notice() called by wp_ajax hooks: {'forminator_dismiss_notification'} **/
/** No params detected :-/ **/


/** Function load_import_form_cf7() called by wp_ajax hooks: {'forminator_load_import_form_cf7_popup'} **/
/** No params detected :-/ **/


/** Function load_uninstall_form() called by wp_ajax hooks: {'forminator_load_uninstall_settings_popup'} **/
/** No params detected :-/ **/


/** Function approve_user() called by wp_ajax hooks: {'forminator_approve_user_popup'} **/
/** No params detected :-/ **/


/** Function load_exports() called by wp_ajax hooks: {'forminator_load_exports_popup'} **/
/** No params detected :-/ **/


/** Function save_report() called by wp_ajax hooks: {'forminator_save_report'} **/
/** Parameters found in function save_report(): {"post": ["reports"]} **/
function save_report() {
		forminator_validate_ajax( 'forminator-save', 'nonce' );

		if ( empty( $_POST['reports'] ) ) {
			wp_send_json_error(
				array(
					'message' => __( 'Something went wrong.', 'forminator' ),
				)
			);
		}

		$report_id    = Forminator_Core::sanitize_text_field( 'report_id' );
		$status       = Forminator_Core::sanitize_text_field( 'status' );
		$reports_data = Forminator_Core::sanitize_array( $_POST['reports'] );

		if ( 0 !== (int) $report_id ) {
			$result = Forminator_Form_Reports_Model::get_instance()->report_update( $report_id ,$reports_data, $status );
		} else {
			$result = Forminator_Form_Reports_Model::get_instance()->report_save( $reports_data, $status );
		}


		if ( is_wp_error( $result ) ) {
			wp_send_json_error();
		}
		wp_send_json_success( $result );
	}


/** Function paypal_update_page() called by wp_ajax hooks: {'forminator_paypal_update_page'} **/
/** No params detected :-/ **/


/** Function fallback_email() called by wp_ajax hooks: {'forminator_2fa_fallback_email', 'nopriv_forminator_2fa_fallback_email'} **/
/** No params detected :-/ **/


/** Function load_hcaptcha_preview() called by wp_ajax hooks: {'forminator_load_hcaptcha_preview'} **/
/** Parameters found in function load_hcaptcha_preview(): {"post": ["captcha"]} **/
function load_hcaptcha_preview() {

		forminator_validate_ajax( 'forminator_load_captcha_settings' );

		$site_language = get_locale();
		$language      = get_option( 'forminator_captcha_language', '' );
		$language      = ! empty( $language ) ? $language : $site_language;

		// $captcha = sanitize_text_field( $_POST['captcha'] );// phpcs:ignore -- data without nonce verification

		$hcaptcha_key    = get_option( 'forminator_hcaptcha_key', '' );
		$hcaptcha_secret = get_option( 'forminator_hcaptcha_secret', '' );
		$onload          = 'forminator_render_admin_hcaptcha';

		if ( ! empty( $hcaptcha_key ) && ! empty( $hcaptcha_secret ) ) {
			// phpcs:ignore WordPress.WP.EnqueuedResources.NonEnqueuedScript
			// recaptchacompat=off seems to fix problems with hcaptcha container loading recaptcha instead of hcaptcha in the admin
			$html  = '<script src="https://js.hcaptcha.com/1/api.js?hl=' . $language . '&onload=' . $onload . '&render=explicit&recaptchacompat=off" async defer></script>';
			$html .= '<div class="forminator-hcaptcha h-captcha" data-sitekey="' . esc_attr( $hcaptcha_key ) . '"></div>';
		} else {
			$html = '<div class="sui-notice" style="margin: 10px 0;"><p>' . esc_html__( 'Save your API keys to load the hCAPTCHA preview.', 'forminator' ) . '</p></div>';
		}

		wp_send_json_success( $html );
	}


/** Function module_settings() called by wp_ajax hooks: {'forminator_addon_module_settings'} **/
/** No params detected :-/ **/


/** Function addons_page_actions() called by wp_ajax hooks: {'$action'} **/
/** No params detected :-/ **/


/** Function stripe_update_page() called by wp_ajax hooks: {'forminator_stripe_update_page'} **/
/** No params detected :-/ **/


/** Function Forminator_Poll_Front() called by wp_ajax hooks: {'forminator_load_poll', 'nopriv_forminator_load_poll'} **/
/** No function found :-/ **/


/** Function settings() called by wp_ajax hooks: {'forminator_addon_settings'} **/
/** No params detected :-/ **/


/** Function delete_poll_submissions() called by wp_ajax hooks: {'forminator_delete_poll_submissions'} **/
/** No params detected :-/ **/


/** Function update_payment_amount() called by wp_ajax hooks: {'forminator_update_payment_amount', 'nopriv_forminator_update_payment_amount'} **/
/** No params detected :-/ **/


/** Function paypal_disconnect() called by wp_ajax hooks: {'forminator_disconnect_paypal'} **/
/** No params detected :-/ **/


/** Function load_pagination_listings() called by wp_ajax hooks: {'forminator_load_pagination_listings_popup'} **/
/** No params detected :-/ **/


/** Function save_pagination_listings() called by wp_ajax hooks: {'forminator_save_pagination_listings_popup'} **/
/** No params detected :-/ **/


/** Function save_appearance_preset() called by wp_ajax hooks: {'forminator_save_appearance_preset'} **/
/** Parameters found in function save_appearance_preset(): {"post": ["settings"]} **/
function save_appearance_preset() {
		forminator_validate_ajax( 'forminator_appearance_preset' );

		$id = Forminator_Core::sanitize_text_field( 'presetId' );
		if ( ! $id ) {
			wp_send_json_error( esc_attr__( "Appearance preset id doesn't exist", 'forminator' ) );
		}

		$settings = array();
		if ( ! empty( $_POST['settings'] ) ) {
			$settings = Forminator_Core::sanitize_array( json_decode( wp_unslash( $_POST['settings'] ), true ) );
		}

		self::save_preset( $id, $settings );

		wp_send_json_success( esc_attr__( 'The preset has been successfully updated.', 'forminator' ) );
	}


/** Function paypal_settings_modal() called by wp_ajax hooks: {'forminator_paypal_settings_modal'} **/
/** No params detected :-/ **/


/** Function dismiss_welcome() called by wp_ajax hooks: {'nopriv_forminator_dismiss_welcome', 'forminator_dismiss_welcome'} **/
/** No params detected :-/ **/


/** Function Forminator_CForm_Front() called by wp_ajax hooks: {'forminator_load_form', 'nopriv_forminator_load_form'} **/
/** No function found :-/ **/


/** Function load_currency() called by wp_ajax hooks: {'forminator_load_currency_popup'} **/
/** No params detected :-/ **/


/** Function deactivate_for_module() called by wp_ajax hooks: {'forminator_addon_deactivate_for_module'} **/
/** No params detected :-/ **/


/** Function create_paypal_order() called by wp_ajax hooks: {'forminator_pp_create_order', 'nopriv_forminator_pp_create_order'} **/
/** No params detected :-/ **/


/** Function load_recaptcha_preview() called by wp_ajax hooks: {'forminator_load_recaptcha_preview'} **/
/** No params detected :-/ **/


/** Function refresh_email_lists() called by wp_ajax hooks: {'forminator_refresh_email_lists'} **/
/** No params detected :-/ **/


/** Function deactivate() called by wp_ajax hooks: {'forminator_addon_deactivate'} **/
/** No params detected :-/ **/


/** Function preview_module() called by wp_ajax hooks: {'forminator_load_preview_cforms_popup', 'forminator_load_preview_quizzes_popup', 'forminator_load_preview_polls_popup'} **/
/** Parameters found in function preview_module(): {"post": ["data"]} **/
function preview_module() {
		$current_action = current_action();
		$slug           = str_replace( array( 'wp_ajax_forminator_load_preview_', '_popup' ), '', $current_action );
		if ( 'cforms' === $slug ) {
			$slug = 'form';
		} elseif ( 'polls' === $slug ) {
			$slug = 'poll';
		} elseif ( 'quizzes' === $slug ) {
			$slug = 'quiz';
		}

		// Validate nonce
		forminator_validate_ajax( 'forminator_popup_preview_' . $slug );

		$preview_data = false;
		// force -1 for preview.
		$form_id = filter_input( INPUT_POST, 'id', FILTER_VALIDATE_INT );
		$form_id = $form_id ? $form_id : - 1;

		// Check if preview data set
		if ( ! empty( $_POST['data'] ) ) {
			$data = Forminator_Core::sanitize_array( $_POST['data'], 'data' );

			if ( ! is_array( $data ) ) {
				$data = json_decode( $data, true );
			}
			$function     = 'forminator_data_to_model_' . $slug;
			$preview_data = $function( $data );
		}

		$html = forminator_preview( $form_id, $slug, true, $preview_data );

		wp_send_json_success( $html );
	}


/** Function get_avatar() called by wp_ajax hooks: {'forminator_get_avatar'} **/
/** No params detected :-/ **/


/** Function load_pagination_entries() called by wp_ajax hooks: {'forminator_load_pagination_entries_popup'} **/
/** No params detected :-/ **/


/** Function stripe_settings_modal() called by wp_ajax hooks: {'forminator_stripe_settings_modal'} **/
/** No params detected :-/ **/


/** Function delete_appearance_preset() called by wp_ajax hooks: {'forminator_delete_appearance_preset'} **/
/** No params detected :-/ **/


/** Function save_accessibility_settings() called by wp_ajax hooks: {'forminator_save_accessibility_settings_popup'} **/
/** No params detected :-/ **/


/** Function reset_tracking_data() called by wp_ajax hooks: {'forminator_reset_tracking_data'} **/
/** No params detected :-/ **/


/** Function later_notice() called by wp_ajax hooks: {'forminator_later_notification'} **/
/** No params detected :-/ **/


/** Function load_import_form_ninja() called by wp_ajax hooks: {'forminator_load_import_form_ninja_popup'} **/
/** No params detected :-/ **/


/** Function fetch_report() called by wp_ajax hooks: {'forminator_fetch_report'} **/
/** No params detected :-/ **/


/** Function load_export() called by wp_ajax hooks: {'forminator_load_export_poll_popup', 'forminator_load_export_form_popup', 'forminator_load_export_quiz_popup'} **/
/** No params detected :-/ **/


/** Function Forminator_QForm_Front() called by wp_ajax hooks: {'nopriv_forminator_reload_quiz', 'nopriv_forminator_load_quiz', 'forminator_load_quiz', 'forminator_reload_quiz'} **/
/** No function found :-/ **/


/** Function save_payments() called by wp_ajax hooks: {'forminator_save_payments_settings_popup'} **/
/** No params detected :-/ **/


/** Function get_addons() called by wp_ajax hooks: {'forminator_addon_get_addons'} **/
/** No params detected :-/ **/


/** Function module_search() called by wp_ajax hooks: {'forminator_module_search'} **/
/** No params detected :-/ **/


/** Function process_action() called by wp_ajax hooks: {'wpmudev_notices_action'} **/
/** Parameters found in function process_action(): {"post": ["plugin_id", "notice_action", "notice_type", "nonce"]} **/
function process_action() {
			// Check required fields.
			if ( ! isset( $_POST['plugin_id'], $_POST['notice_action'], $_POST['notice_type'], $_POST['nonce'] ) ) {
				wp_die( esc_html__( 'Required fields are missing.', 'wdev_frash' ) );
			}

			// Only admins can do this.
			if ( ! is_super_admin() ) {
				wp_die( esc_html__( 'Access check failed.', 'wdev_frash' ) );
			}

			// Get request data.
			$plugin = sanitize_text_field( wp_unslash( $_POST['plugin_id'] ) );
			$action = sanitize_text_field( wp_unslash( $_POST['notice_action'] ) );
			$type   = sanitize_text_field( wp_unslash( $_POST['notice_type'] ) );
			$nonce  = sanitize_text_field( wp_unslash( $_POST['nonce'] ) );

			// Verify nonce.
			if ( ! wp_verify_nonce( $nonce, 'wpmudev_notices_action' ) ) {
				wp_die( esc_html__( 'Nonce verification failed.', 'wdev_frash' ) );
			}

			// Initialize the options.
			$this->init_option();

			// Get the notice class.
			$notice = $this->get_notice( $plugin, $type );

			// Process action if defined on this class.
			if ( method_exists( $this, $action ) ) {
				call_user_func( array( $this, $action ), $plugin, $type );
			} elseif ( is_object( $notice ) && method_exists( $notice, $action ) ) {
				// Process action if defined on the notice class.
				call_user_func( array( $notice, $action ), $plugin );
			}

			/**
			 * Action hook to do something after a notice action is performed.
			 *
			 * @param string $action Action.
			 * @param string $plugin Plugin ID.
			 * @param string $type   Notice type.
			 *
			 * @since 2.0
			 */
			do_action( 'wpmudev_notices_after_notice_action', $action, $plugin, $type );

			wp_die();
		}


/** Function save_builder() called by wp_ajax hooks: {'forminator_save_builder'} **/
/** Parameters found in function save_builder(): {"post": ["data"]} **/
function save_builder() {
		if ( ! forminator_is_user_allowed() ) {
			wp_send_json_error( __( 'Invalid request, you are not allowed to do that action.', 'forminator' ) );
		}

		forminator_validate_ajax( 'forminator_save_builder_fields' );

		$submitted_data = $this->get_post_data();
		$form_data      = array();
		$fields         = array();
		$id             = isset( $submitted_data['form_id'] ) ? intval( $submitted_data['form_id'] ) : 0;
		$title          = $submitted_data['formName'];
		$status         = isset( $submitted_data['status'] ) ? $submitted_data['status'] : '';
		$version        = isset( $submitted_data['version'] ) ? $submitted_data['version'] : '1.0';
		$template       = new stdClass();
		$action         = false;

		if ( ! empty( $_POST['data'] ) ) {
			$form_data = Forminator_Core::sanitize_array( json_decode( wp_unslash( $_POST['data'] ), true ) );
		}

		if ( is_null( $id ) || $id <= 0 ) {
			$form_model = new Forminator_Form_Model();
			$action     = 'create';

			if ( empty( $status ) ) {
				$status = Forminator_Form_Model::STATUS_PUBLISH;
			}
		} else {
			$form_model = Forminator_Base_Form_Model::get_model( $id );
			$action     = 'update';

			if ( ! is_object( $form_model ) ) {
				wp_send_json_error( __( "Form model doesn't exist", 'forminator' ) );
			}

			if ( empty( $status ) ) {
				$status = $form_model->status;
			}

			// we need to empty fields cause we will send new data
			$form_model->clear_fields();
		}

		// Build the fields.
		if ( isset( $form_data ) ) {
			$fields = $form_data['wrappers'];
			unset( $form_data['wrappers'] );
		}
		$template->fields = $fields;

		if ( isset( $form_data['integrationConditions'] ) ) {
			$template->integration_conditions = $form_data['integrationConditions'];
		}

		if ( isset( $form_data['behaviorArray'] ) ) {
			$template->behaviors = $form_data['behaviorArray'];
		}

		if ( isset( $form_data['notifications'] ) ) {
			$template->notifications = $form_data['notifications'];
		}

		// Sanitize settings
		$settings				= $form_data['settings'];
		$activation_method		= ! empty( $settings['activation-method'] ) ? $settings['activation-method'] : '';
		if ( 'manual' == $activation_method ) {
			$settings['automatic-login'] = '';
		}
		$settings['version'] = $version;
		$template->settings  = $settings;

		$id = Forminator_Custom_Form_Admin::update( $id, $title, $status, $template );
		if ( is_wp_error( $id ) ) {
			wp_send_json_error( $id->get_error_message() );
		} else {
			wp_send_json_success( $id );
		}
	}


/** Function save_login() called by wp_ajax hooks: {'forminator_save_login'} **/
/** No function found :-/ **/


/** Function load_import() called by wp_ajax hooks: {'forminator_load_import_quiz_popup', 'forminator_load_import_form_popup', 'forminator_load_import_poll_popup'} **/
/** No params detected :-/ **/


/** Function resend_activation_link() called by wp_ajax hooks: {'forminator_resend_activation_link'} **/
/** No params detected :-/ **/


/** Function filter_report_data() called by wp_ajax hooks: {'forminator_filter_report_data'} **/
/** No params detected :-/ **/


/** Function submit_email_draft_link() called by wp_ajax hooks: {'nopriv_forminator_email_draft_link', 'forminator_email_draft_link'} **/
/** No params detected :-/ **/


/** Function search_users() called by wp_ajax hooks: {'forminator_search_users'} **/
/** No params detected :-/ **/


/** Function save_register() called by wp_ajax hooks: {'forminator_save_register'} **/
/** No function found :-/ **/


/** Function promote_remind_later() called by wp_ajax hooks: {'forminator_promote_remind_later'} **/
/** No params detected :-/ **/


/** Function clear_exports() called by wp_ajax hooks: {'forminator_clear_exports_popup'} **/
/** No params detected :-/ **/


/** Function save_dashboard_settings() called by wp_ajax hooks: {'forminator_save_dashboard_settings_popup'} **/
/** No params detected :-/ **/


/** Function update_report_status() called by wp_ajax hooks: {'forminator_report_update_status'} **/
/** No params detected :-/ **/


/** Function save_import_form_ninja() called by wp_ajax hooks: {'forminator_save_import_form_ninja_popup'} **/
/** No params detected :-/ **/


/** Function resend_notification_email() called by wp_ajax hooks: {'forminator_resend_notification_email'} **/
/** No params detected :-/ **/


/** Function save_import_form_cf7() called by wp_ajax hooks: {'forminator_save_import_form_cf7_popup'} **/
/** No params detected :-/ **/


